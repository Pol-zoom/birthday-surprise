<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>открытка для Алёны</title>
<style>
:root{
  --bg:#1a0a2a;
  --neon:#ff00ff;
  --neon-2:#8a2be2;
  --neon-cyan:#00ffff;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family: "Courier New", monospace;
  color:var(--neon);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* общие стили для фонового кода */
.code-background{
  position:fixed;
  top:0;
  height:100%;
  padding:24px;
  pointer-events:none;
  display:flex;
  flex-direction:column;
  gap:2px;
  overflow:hidden;
  opacity:0.12;
  font-size:12px;
  line-height:1.1;
  letter-spacing:0.6px;
}

/* левая колонка */
.code-background.left{
  left:0;
  align-items:flex-start;
  text-align:left;
  width:50%;
}
/* правая колонка */
.code-background.right{
  right:0;
  align-items:flex-end;
  text-align:right;
  width:50%;
}

/* отдельная строка кода */
.code-line{
  white-space:nowrap;
  width:100%;
  color:inherit;
}

/* экран с поздравлением */
.screen{
  position:relative;
  z-index:2;
  width:50%;
  max-width:760px;
  min-width:320px;
  padding:28px;
  background:rgba(10,3,20,0.88);
  border-radius:16px;
  border:2px solid var(--neon);
  box-shadow:0 0 18px var(--neon),0 0 36px var(--neon-2),0 0 60px var(--neon-cyan);
}

/* хакерский текст */
#hackText{
  display:block;
  min-height:48px;
  font-size:18px;
  text-align:left;
  overflow-wrap:break-word;
}
.typing-cursor::after{
  content: "";
  display:inline-block;
  width:2px;
  height:1.05em;
  background:var(--neon);
  margin-left:6px;
  animation:blink 0.8s steps(1) infinite;
  vertical-align:bottom;
}
@keyframes blink{
  0%,50%,100%{opacity:1}
  25%,75%{opacity:0}
}

/* карточка поздравления */
.card{
  margin-top:18px;
  padding:18px;
  background:rgba(0,0,0,0.55);
  border-radius:12px;
  border:2px solid var(--neon);
  box-shadow:0 0 14px var(--neon),0 0 30px var(--neon-2);
  display:none;
  text-align:left;
}
.card p{
  margin:8px 0;
  color:var(--neon);
  text-shadow:0 0 6px var(--neon),0 0 12px var(--neon-2);
  font-size:16px;
  line-height:1.25;
}

/* адаптация для мобильных */
@media (max-width:900px){
  .code-background{ display:none; }
  .screen{ width:92%; }
}
</style>
</head>
<body>

<div class="code-background left" id="codeBgLeft"></div>
<div class="code-background right" id="codeBgRight"></div>

<div class="screen" id="screen">
  <div id="hackText"></div>
  <div class="card" id="card"></div>
</div>

<script>
const chars = '0123456789abcdef<>/{}[]()@#$%^&*-_=+;:,.;:';

function populateCodeBackground(id, lines = 60, lineLen = 48){
  const container = document.getElementById(id);
  container.innerHTML = '';
  for(let i=0;i<lines;i++){
    let line='';
    for(let j=0;j<lineLen;j++){
      line += chars[Math.floor(Math.random()*chars.length)];
    }
    const div = document.createElement('div');
    div.className = 'code-line';
    div.textContent = line;
    container.appendChild(div);
  }
}
// создаём и обновляем оба фона
populateCodeBackground('codeBgLeft',120,36);
populateCodeBackground('codeBgRight',120,36);
setInterval(()=>{
  populateCodeBackground('codeBgLeft',120,36);
  populateCodeBackground('codeBgRight',120,36);
},4200);

/* -----------------------
   Твой массив hackSteps
----------------------- */
const hackSteps = [
  "Ищется код...",
  "Код не найден",
  "Идём на крайние меры",
  "Взлом Пентагона...",
  "Странно, в Пентагоне этого кода нет...",
  "Тогда глянем Компьютер креатора данного кода",
  "О! Вот он!"
];

const wishes = [
  "С Днём Рождения, Алёна!",
  "Пусть каждый день будет ярким, как этот неон!",
  "Желаю счастья, радости и вдохновения!",
  "Пусть все мечты сбываются!"
];

const hackTextElem = document.getElementById('hackText');
const card = document.getElementById('card');

function typeTextToElement(el, text, speed = 60){
  return new Promise(resolve=>{
    el.classList.add('typing-cursor');
    el.textContent = '';
    let i=0;
    const t=setInterval(()=>{
      if(i>=text.length){
        clearInterval(t);
        setTimeout(()=>{el.classList.remove('typing-cursor'); resolve()},350);
        return;
      }
      el.textContent += text[i];
      i++;
    }, speed);
  });
}

async function runHackSequence(){
  for(let i=0;i<hackSteps.length;i++){
    hackTextElem.textContent='';
    await typeTextToElement(hackTextElem,hackSteps[i],70);
    await new Promise(r=>setTimeout(r,700));
  }
  await new Promise(r=>setTimeout(r,500));
  hackTextElem.style.opacity='0';
  await new Promise(r=>setTimeout(r,300));
  card.style.display='block';
  await runCard();
}

async function runCard(){
  for(let i=0;i<wishes.length;i++){
    const p=document.createElement('p');
    card.appendChild(p);
    const speed = (i===0)?110:70;
    await typeTextToElement(p,wishes[i],speed);
    await new Promise(r=>setTimeout(r,400));
  }
}

window.addEventListener('load',()=>{runHackSequence();});
</script>

</body>
</html>

