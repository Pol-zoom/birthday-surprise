<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>С Днём Рождения, Алёна!</title>
<style>
body {
  margin: 0;
  height: 100vh;
  background: black;
  font-family: "Courier New", monospace;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #00ff00;
}

canvas {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}

.screen {
  position: relative;
  z-index:1;
  width: 80%;
  max-width: 700px;
  background: rgba(0,0,0,0.8);
  padding: 20px;
  border: 2px solid #00ff00;
  border-radius: 12px;
}

#hackText {
  min-height: 50px;
}

.typing-cursor::after {
  content: "";
  display: inline-block;
  width: 2px;
  height: 1em;
  background: #00ff00;
  margin-left: 4px;
  animation: blink 0.7s steps(1) infinite;
  vertical-align: bottom;
}

@keyframes blink{
  0%,50%,100%{opacity:1}
  25%,75%{opacity:0}
}

.card {
  margin-top: 20px;
  display: none;
}
.card p {
  margin: 6px 0;
  color: #00ff00;
}
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<div class="screen">
  <div id="hackText"></div>
  <div class="card" id="card"></div>
</div>

<script>
// --------------------
// Matrix фон
// --------------------
const canvas = document.getElementById('matrixCanvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;

const fontSize = 16;
const columns = Math.floor(W / fontSize);
const drops = [];
for(let i=0;i<columns;i++) drops[i]=Math.floor(Math.random()*H/fontSize);

const chars = '0123456789abcdef<>/{}[]()@#$%^&*-_=+;:,.;:';

function draw(){
  ctx.fillStyle = 'rgba(0,0,0,0.05)';
  ctx.fillRect(0,0,W,H);
  ctx.fillStyle = '#00ff00';
  ctx.font = fontSize+"px monospace";
  for(let i=0;i<drops.length;i++){
    const text = chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(text, i*fontSize, drops[i]*fontSize);
    if(drops[i]*fontSize>H && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw, 50);
window.addEventListener('resize', ()=>{
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
});

// --------------------
// Хакерский текст
// --------------------
const hackSteps = [
  "Ищется код...",
  "Код не найден",
  "Идём на крайние меры",
  "Взлом Пентагона...",
  "Странно, в Пентагоне этого кода нет...",
  "Тогда глянем Компьютер креатора данного кода",
  "О! Вот он!"
];

const wishes = [
  "С Днём Рождения, Алёна!",
  "Пусть каждый день будет ярким, как этот неон!",
  "Желаю счастья, радости и вдохновения!",
  "Пусть все мечты сбываются!"
];

const hackTextElem = document.getElementById('hackText');
const card = document.getElementById('card');

function typeTextToElement(el, text, speed = 60){
  return new Promise(resolve=>{
    el.classList.add('typing-cursor');
    el.textContent = '';
    let i=0;
    const t=setInterval(()=>{
      if(i>=text.length){
        clearInterval(t);
        setTimeout(()=>{el.classList.remove('typing-cursor'); resolve()}, 300);
        return;
      }
      el.textContent += text[i];
      i++;
    }, speed);
  });
}

async function runHackSequence(){
  for(let i=0;i<hackSteps.length;i++){
    hackTextElem.textContent='';
    await typeTextToElement(hackTextElem,hackSteps[i],70);
    await new Promise(r=>setTimeout(r, 500));
  }
  hackTextElem.style.opacity='0';
  await new Promise(r=>setTimeout(r, 300));
  card.style.display='block';
  await runCard();
}

async function runCard(){
  for(let i=0;i<wishes.length;i++){
    const p=document.createElement('p');
    card.appendChild(p);
    await typeTextToElement(p,wishes[i],70);
    await new Promise(r=>setTimeout(r, 300));
  }
}

window.addEventListener('load', ()=>{ runHackSequence(); });
</script>

</body>
</html>
