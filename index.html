<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>С Днём Рождения, Алёна!</title>
<style>
body {
  margin:0;
  height:100vh;
  background:black;
  font-family:"Courier New", monospace;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#ff00ff;
  cursor: pointer;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}

.screen{
  position:relative;
  z-index:1;
  width:80%;
  max-width:700px;
  background:rgba(20,0,40,0.85);
  padding:20px;
  border:2px solid #ff00ff;
  border-radius:12px;
  box-shadow:0 0 20px #ff00ff,0 0 40px #8a2be2,0 0 60px #ff00ff;
  text-align:left;
}

#hackText{
  min-height:50px;
}

.typing-cursor::after{
  content:"";
  display:inline-block;
  width:2px;
  height:1em;
  background:#ff00ff;
  margin-left:4px;
  animation:blink 0.7s steps(1) infinite;
  vertical-align:bottom;
}

@keyframes blink{
  0%,50%,100%{opacity:1}
  25%,75%{opacity:0}
}

.card{
  margin-top:20px;
  display:none;
}
.card p{
  margin:6px 0;
  color:#ff00ff;
  text-shadow:0 0 6px #ff00ff,0 0 12px #8a2be2;
  animation: pulse 2s infinite;
}

@keyframes pulse{
  0%,100%{text-shadow:0 0 6px #ff00ff,0 0 12px #8a2be2; opacity:1;}
  50%{text-shadow:0 0 20px #ff00ff,0 0 30px #ff69b4; opacity:0.85;}
}

#startMessage{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:24px;
  color:#ff00ff;
  text-shadow:0 0 10px #ff00ff;
  text-align:center;
}
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<div class="screen">
  <div id="hackText"></div>
  <div class="card" id="card"></div>
</div>

<div id="startMessage">Нажмите Enter или тапните по экрану, чтобы начать</div>

<script>
// --------------------
// Matrix фон
// --------------------
const canvas = document.getElementById('matrixCanvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
const fontSize = 18;
const columns = Math.floor(W / fontSize);
const drops = [];
for(let i=0;i<columns;i++) drops[i]=Math.floor(Math.random()*H/fontSize);
const chars = '0123456789abcdef<>/{}[]()@#$%^&*-_=+;:,.;:';
let matrixInterval;

function draw(){
  ctx.fillStyle='rgba(0,0,0,0.05)';
  ctx.fillRect(0,0,W,H);
  for(let i=0;i<drops.length;i++){
    const rand=Math.random();
    if(rand<0.85) ctx.fillStyle='#ff00ff';
    else if(rand<0.925) ctx.fillStyle='#ff69b4';
    else ctx.fillStyle='#8a2be2';
    ctx.font=fontSize+'px monospace';
    const text=chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>H && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  }
}
function startMatrix(){ matrixInterval=setInterval(draw,40); }

// --------------------
// Хакерская анимация + поздравление
// --------------------
const hackSteps = [
  "Ищется код...",
  "Код не найден",
  "Идём на крайние меры",
  "Взлом Пентагона...",
  "Странно, в Пентагоне этого кода нет...",
  "Тогда глянем Компьютер креатора данного кода",
  "О! Вот он!"
];

const wishes = [
  "С Днём Рождения, Алёна!",
  "Пусть каждый день будет ярким, как этот неон!",
  "Желаю счастья, радости и вдохновения!",
  "Пусть все мечты сбываются!"
];

const hackTextElem = document.getElementById('hackText');
const card = document.getElementById('card');
const startMessage = document.getElementById('startMessage');

function typeTextToElement(el,text,speed=60){
  return new Promise(resolve=>{
    el.classList.add('typing-cursor');
    el.textContent='';
    let i=0;
    const t=setInterval(()=>{
      if(i>=text.length){
        clearInterval(t);
        setTimeout(()=>{el.classList.remove('typing-cursor'); resolve()},300);
        return;
      }
      el.textContent+=text[i];
      i++;
    },speed);
  });
}

async function runHackSequence(){
  for(let i=0;i<hackSteps.length;i++){
    hackTextElem.textContent='';
    await typeTextToElement(hackTextElem,hackSteps[i],70);
    await new Promise(r=>setTimeout(r,500));
  }
  hackTextElem.style.opacity='0';
  await new Promise(r=>setTimeout(r,300));
  card.style.display='block';
  await runCard();
}

async function runCard(){
  for(let i=0;i<wishes.length;i++){
    const p=document.createElement('p');
    card.appendChild(p);
    await typeTextToElement(p,wishes[i],70);
    await new Promise(r=>setTimeout(r,300));
  }
}

// --------------------
// Старт по Enter или тапу
// --------------------
function startAnimation(){
  startMessage.style.display='none';
  startMatrix();
  runHackSequence();
  window.removeEventListener('keydown',onKey);
  window.removeEventListener('touchstart',onTouch);
}

function onKey(e){ if(e.key==='Enter') startAnimation(); }
function onTouch(){ startAnimation(); }

window.addEventListener('keydown',onKey);
window.addEventListener('touchstart',onTouch);

window.addEventListener('resize',()=>{
  W=canvas.width=window.innerWidth;
  H=canvas.height=window.innerHeight;
});
</script>

</body>
</html>
